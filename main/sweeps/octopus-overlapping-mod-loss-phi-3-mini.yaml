program: /proj/main/main.py
project: fine-tuning-retriever
name: octopus-overlapping-mod-loss-phi-3-mini
method: grid

metric:
  goal: maximize
  name: RankAvg
  target: 100.0

parameters:
  num_train_epochs:
    values: [5, 10, 15]
  num_retrieved_docs_per_query:
    values: [3, 6, 9]
  gamma_value:
    values: [0.3, 0.5, 1]
  beta_value:
    values: [0.3, 0.5, 1]

command:
  - python3
  - ${program}
  - --dataset_path=/proj/mounted/datasets/octopus-overlapping
  - --docs_path=/proj/mounted/func-docs/documentation-octopus.txt
  - --retr_model_name_or_path=FacebookAI/roberta-base
  - --infer_model_name_or_path=microsoft/Phi-3-mini-4k-instruct
  - --infer_model_type=phi3
  - --query_column=query
  - --response_column=response
  - --batch_size=8
  - ${args}
  - --learning_rate=1e-5
  - --lr_scheduler=cosine
  - --quantize
  - --dataset_type=function_calling
  - --modified_loss
  - --log_to_wandb
  - --wandb_proj_name=octopus-overlapping-mod-loss-phi-3-mini
